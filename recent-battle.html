<!doctype html>
<html lang="ja">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>player_stats 履歴</title>
    <style>
        #psb-body {
            font-family: system-ui;
            background: #0f172a;
            color: #e6eef8;
            padding: 20px;
            display: flex;
            gap: 20px
        }

        #psb-matches {
            flex-shrink: 0
        }

        #psb-details {
            flex-grow: 1;
            opacity: 0;
            transform: translateY(10px);
            transition: opacity 0.3s ease, transform 0.3s ease
        }

        #psb-details.psb-visible {
            opacity: 1;
            transform: translateY(0)
        }

        #psb-matches h1 {
            font-size: 20px;
            margin-bottom: 12px
        }

        .psb-match-btn {
            background: #1d2b4a;
            border: 0;
            padding: 10px;
            border-radius: 8px;
            color: #dff0ff;
            margin: 5px;
            cursor: pointer;
            display: block;
            width: 250px;
            text-align: center
        }

        .psb-match-btn:hover {
            background: #2a3d6b
        }

        .psb-btn-type {
            display: block;
            font-size: 16px;
            font-weight: bold
        }

        .psb-btn-sub {
            display: block;
            font-size: 12px;
            opacity: 0.8
        }

        .psb-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 8px
        }

        .psb-table th,
        .psb-table td {
            padding: 6px 10px;
            text-align: left;
            border-bottom: 1px solid rgba(255, 255, 255, .1);
            font-size: 13px
        }

        .psb-win-true {
            color: #9ae6b4
        }

        .psb-win-false {
            color: #ffb4b4
        }
    </style>
</head>

<body>
    <div id="psb-body">
        <div id="psb-matches">
            <h1>試合履歴</h1>
        </div>
        <div id="psb-details"></div>

        <script>
            const player_stats = [["-SouCraK12345-", "VirtualBattle", 74.7, 1.8, 457250, 139, "01:51.58", false, 60], ["-SouCraK12345-", "VirtualBattle", 67.9, 1.8, 393000, 111, "01:43.43", false, 60], ["-SouCraK12345-", "VirtualBattle", 49, 2.1, 79000, 25, "00:30.63", false, 60], ["-SouCraK12345-", "VirtualBattle", 60.2, 1.8, 241250, 80, "01:09.79", false, 60], ["-SouCraK12345-", "VirtualBattle", 14.6, 1.7, 27000, 13, "00:20.56", false, 60], ["-SouCraK12345-", "VirtualBattle", 54.1, 1.8, 55500, 13, "00:21.06", false, 60], ["-SouCraK12345-", "VirtualBattle", 90.7, 2, 187750, 53, "00:41.01", true, 60], ["-SouCraK12345-", "VirtualBattle", 75, 2.1, 167500, 48, "00:44.02", true, 40], ["-SouCraK12345-", "VirtualBattle", 75.8, 1.9, 213250, 59, "00:53.03", true, 40], ["-SouCraK12345-", "VirtualBattle", 65.1, 1.9, 265750, 81, "01:11.00", true, 40]];

            const matchesDiv = document.getElementById('psb-matches');
            const detailsDiv = document.getElementById('psb-details');

            player_stats.forEach((r, i) => {
                const btn = document.createElement('button');
                btn.className = 'psb-match-btn';
                btn.innerHTML = `<span class='psb-btn-type'>${r[1]}</span><span class='psb-btn-sub'>apm: ${r[2]} | time: ${r[6]}</span>`;
                btn.onclick = () => showDetails(i);
                matchesDiv.appendChild(btn);
            });

            function showDetails(index) {
                const r = player_stats[index];
                let html = `<h2>${r[1]} 詳細</h2>`;
                html += `<table class='psb-table'><tbody>
        <tr><th>APM</th><td>${r[2]}</td></tr>
        <tr><th>PPS</th><td>${r[3]}</td></tr>
        <tr><th>スコア</th><td>${r[4].toLocaleString()}</td></tr>
        <tr><th>消去ライン</th><td>${r[5]}</td></tr>
        <tr><th>タイム</th><td>${r[6]}</td></tr>
        <tr><th>勝敗</th><td class="${r[7] ? 'psb-win-true' : 'psb-win-false'}">${r[7] ? 'Win' : 'Lose'}</td></tr>
        <tr><th>相手APM</th><td>${r[8]}</td></tr>
      </tbody></table>`;
                detailsDiv.innerHTML = html;
                detailsDiv.classList.remove('psb-visible');
                // 強制リフローでアニメーション再発火
                void detailsDiv.offsetWidth;
                detailsDiv.classList.add('psb-visible');
            }
        </script>

    </div>
</body>

</html>